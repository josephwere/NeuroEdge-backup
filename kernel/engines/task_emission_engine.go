package engines

import (
	"time"

	"NeuroEdge/kernel/core"
)

type TaskEmissionEngine struct {
	name string
}

func NewTaskEmissionEngine() *TaskEmissionEngine {
	return &TaskEmissionEngine{name: "TaskEmissionEngine"}
}

func (e *TaskEmissionEngine) Name() string {
	return e.name
}

func (e *TaskEmissionEngine) Init() {
	core.Info(e.Name() + " initializing...")

	go func() {
		for {
			time.Sleep(3 * time.Second)
			core.GetKernel().EventBus.Publish(core.Event{
				Name: "TaskEvent",
				Data: "Sample task generated by TaskEmissionEngine",
			})
		}
	}()
}

func (e *TaskEmissionEngine) Shutdown() {
	core.Info(e.Name() + " shutting down.")
}
